import React, {useState, useCallback} from "react";

type Props = {
  placeholder: string,
  changeFile: (file: File | null) => void;
}

export const InputFile: React.FC<Props> = (props) => {
  const [fileName, setFileName] = useState('');

  const handleFileChange = useCallback((event) => {
    const file = event.target.files[0];
    props.changeFile(file);
    if (file) {
      setFileName(file.name);
    }
  }, []);

  return (
    <div className="mt-4 lg:mt-6">
      <input
        type="file"
        id="file"
        name="file"
        className="hidden"
        onChange={handleFileChange}
      />
      <label htmlFor="file" className="text-[#C4C4C4] font-['Gilroy',sans-serif] font-medium text-sm lg:text-[20px] leading-[100%] hover:text-[#616161] flex items-center gap-x-4 fill-[#C4C4C4] hover:fill-[#616161]">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="22" viewBox="0 0 20 22">
          <path fillRule="evenodd" clipRule="evenodd" d="M10.5226 1.4356C11.4277 0.516401 12.6553 0 13.9353 0C15.2153 0 16.4428 0.516401 17.3479 1.4356C18.253 2.3548 18.7615 3.6015 18.7615 4.90145C18.7615 6.20139 18.253 7.44809 17.3479 8.36729L9.0001 16.8453C8.74236 17.1071 8.43637 17.3148 8.09959 17.4566C7.76281 17.5983 7.40183 17.6713 7.03727 17.6714C6.30102 17.6715 5.59486 17.3746 5.07415 16.846C4.55344 16.3174 4.26083 15.6003 4.2607 14.8526C4.26056 14.1048 4.55291 13.3877 5.07343 12.8588L13.1718 4.63269L14.1984 5.67532L6.09859 13.9C5.97549 14.025 5.87783 14.1734 5.81121 14.3368C5.74458 14.5001 5.71029 14.6752 5.71029 14.852C5.71029 15.0289 5.74458 15.2039 5.81121 15.3673C5.87783 15.5306 5.97549 15.6791 6.09859 15.8041C6.2217 15.9291 6.36785 16.0283 6.5287 16.096C6.68954 16.1636 6.86194 16.1985 7.03604 16.1985C7.21014 16.1985 7.38253 16.1636 7.54338 16.096C7.70422 16.0283 7.85037 15.9291 7.97348 15.8041L16.3213 7.32614C16.6348 7.00772 16.8835 6.62971 17.0532 6.21368C17.2229 5.79765 17.3102 5.35175 17.3102 4.90145C17.3102 4.45114 17.2229 4.00524 17.0532 3.58921C16.8835 3.17318 16.6348 2.79517 16.3213 2.47675C16.0078 2.15834 15.6355 1.90576 15.2259 1.73343C14.8163 1.56111 14.3772 1.47241 13.9338 1.47241C13.4904 1.47241 13.0514 1.56111 12.6417 1.73343C12.2321 1.90576 11.8599 2.15834 11.5463 2.47675L2.95059 11.208C1.95344 12.246 1.3992 13.6412 1.40799 15.0913C1.41679 16.5414 1.9879 17.9296 2.99755 18.955C4.00721 19.9804 5.37408 20.5604 6.80192 20.5693C8.22977 20.5782 9.60356 20.0154 10.6256 19.0027L18.9734 10.5232L20 11.5659L11.6507 20.0438C10.3532 21.3142 8.6165 22.0165 6.81427 21.9997C5.01204 21.9829 3.28833 21.2482 2.014 19.9539C0.739678 18.6595 0.0165775 16.9088 0.0002815 15.0784C-0.0160145 13.2481 0.675796 11.4844 1.92687 10.1669L10.5226 1.43413V1.4356Z" />
        </svg>
        <div className="flex items-center gap-x-2">
          {fileName.length ? fileName : props.placeholder}
          <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12">
            <path fillRule="evenodd" clipRule="evenodd" d="M11.7727 1.32466C11.8448 1.25269 11.902 1.16724 11.941 1.07318C11.98 0.979112 12.0001 0.878283 12.0002 0.776444C12.0003 0.674605 11.9803 0.573751 11.9413 0.47964C11.9024 0.38553 11.8454 0.300005 11.7734 0.22795C11.7014 0.155894 11.616 0.0987197 11.5219 0.0596898C11.4279 0.0206599 11.327 0.00053926 11.2252 0.000476667C11.1233 0.000414074 11.0225 0.0204108 10.9284 0.059325C10.8343 0.0982392 10.7487 0.155309 10.6767 0.227275L6 4.90396L1.32466 0.227275C1.17914 0.0817533 0.981767 -1.53333e-09 0.775968 0C0.570168 1.53332e-09 0.372798 0.0817533 0.227276 0.227275C0.0817534 0.372798 1.53333e-09 0.570168 0 0.775967C-1.53332e-09 0.981767 0.0817534 1.17914 0.227276 1.32466L4.90396 6L0.227276 10.6753C0.15522 10.7474 0.0980629 10.8329 0.0590669 10.9271C0.0200709 11.0212 0 11.1221 0 11.224C0 11.3259 0.0200709 11.4268 0.0590669 11.521C0.0980629 11.6151 0.15522 11.7007 0.227276 11.7727C0.372798 11.9182 0.570168 12 0.775968 12C0.877869 12 0.978773 11.9799 1.07292 11.9409C1.16706 11.9019 1.2526 11.8448 1.32466 11.7727L6 7.09603L10.6767 11.7727C10.8222 11.9181 11.0195 11.9996 11.2252 11.9995C11.4309 11.9994 11.6281 11.9176 11.7734 11.772C11.9187 11.6265 12.0003 11.4292 12.0002 11.2236C12.0001 11.0179 11.9182 10.8207 11.7727 10.6753L7.09604 6L11.7727 1.32466Z" />
          </svg>
        </div>
      </label>
    </div>
  )
};

export type { Props as InputFileProps };
export default InputFile;
